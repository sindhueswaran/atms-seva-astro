---
const navigation = [
  { weight: 1, name: "Covid-19", href: "/covid", current: false },
  { weight: 2, name: "About", href: "/about", current: false },
  { weight: 3, name: "What We Do", href: "/whatwedo", current: false },
  { weight: 4, name: "Gallery", href: "/gallery", current: false },
  { weight: 5, name: "Contact", href: "/contact", current: false },
  { weight: 6, name: "Support", href: "/support", current: false },
];
---

<nav
  class="relative h-20 px-4 py-4 flex justify-between items-center bg-gray-50 shadow-sm"
>
  <div class="lg:hidden">
    <a class="" href="/">
      <img src="../src/images/atmasevalogo.png" width="75" height="75" />
    </a>
  </div>

  <div class="lg:hidden">
    <button class="navbar-burger flex items-center text-gray-800">
      <iconify-icon icon="lucide:align-justify" width="28"></iconify-icon>
    </button>
  </div>
  <ul
    id="menu"
    class="hidden absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 lg:mx-auto lg:flex lg:items-center lg:w-auto lg:space-x-6"
  >
    <li>
      <a class="" href="/">
        <img
          src="../src/images/atmasevalogo.png"
          alt="atma seva logo"
          width="75"
          height="75"
        />
      </a>
    </li>
    {
      navigation.map((item) => (
        <li>
          <a
            class="nav-link text-3xl font-bold font-display text-amber-500 transition delay-150 duration-300 ease-in-out hover:text-orange-500 active:text-orange-500 target:text-orange-500"
            href={item.href}
            id={item.name}
          >
            {item.name}
          </a>
        </li>
      ))
    }
  </ul>
</nav>
<div class="navbar-menu relative z-50 hidden">
  <nav
    class="fixed top-0 left-0 bottom-0 flex flex-col w-full py-4 px-4 bg-white border-r overflow-y-auto"
  >
    <div class="flex items-center mb-8">
      <a class="mr-auto text-3xl font-bold leading-none" href="/">
        <img src="../src/images/atmasevalogo.png" width="75" height="75" />
      </a>
      <button class="navbar-close text-gray-800">
        <iconify-icon icon="lucide:x" width="28"></iconify-icon>
      </button>
    </div>
    <div>
      <ul id="menu">
        {
          navigation.map((item) => (
            <li class="mb-1 ">
              <a
                class="nav-link block text-center p-4 text-4xl font-bold font-display text-amber-500 transition delay-150 duration-300 ease-in-out hover:text-orange-500 hover:bg-amber-50 rounded"
                href={item.href}
                aria-label={item.href}
              >
                {item.name}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </nav>
</div>

<style>
  .active {
    color: #d97706;
    font-weight: 400;
    background-color: #d9770615;
    padding: 0.2rem 0.4rem;
    border-radius: 0.5rem;
  }
</style>

<script is:inline>
  document.querySelectorAll(".nav-link").forEach((link) => {
    if (link.href === window.location.href) {
      link.classList.add("active");
      link.setAttribute("aria-current", "page");
    }
  });

  // Burger menus
  document.addEventListener("DOMContentLoaded", function () {
    // open
    const burger = document.querySelectorAll(".navbar-burger");
    const menu = document.querySelectorAll(".navbar-menu");

    if (burger.length && menu.length) {
      for (var i = 0; i < burger.length; i++) {
        burger[i].addEventListener("click", function () {
          for (var j = 0; j < menu.length; j++) {
            menu[j].classList.toggle("hidden");
          }
        });
      }
    }

    // close
    const close = document.querySelectorAll(".navbar-close");
    const backdrop = document.querySelectorAll(".navbar-backdrop");

    if (close.length) {
      for (var i = 0; i < close.length; i++) {
        close[i].addEventListener("click", function () {
          for (var j = 0; j < menu.length; j++) {
            menu[j].classList.toggle("hidden");
          }
        });
      }
    }

    if (backdrop.length) {
      for (var i = 0; i < backdrop.length; i++) {
        backdrop[i].addEventListener("click", function () {
          for (var j = 0; j < menu.length; j++) {
            menu[j].classList.toggle("hidden");
          }
        });
      }
    }
  });
</script>
